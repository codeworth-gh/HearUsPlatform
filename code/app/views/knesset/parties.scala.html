@import be.objectify.deadbolt.scala.AuthenticatedRequest

@(parties:Seq[Party])(implicit request: AuthenticatedRequest[_], msgs:MessagesProvider)

@head = {
  <script src="@routes.Assets.versioned("js/partiesPage.js")"></script>
}

@templates.backEndBase("parties", views.BackOfficeSections.Knesset, Html(""), head){
  @comps.pageTitleRow(Messages("parties.title")){
    <button onclick="addRow()" class="btn btn-large btn-outline-success"><i class="fa fa-plus-circle"></i> @Messages("add")</button>
  }
  <div class="row">
    <div class="col" id="partiesCtnr">
      @if(parties.isEmpty){
        @comps.noData{
          No parties currently defined. You can <input type="button" class="addButton" onclick="addRow()" value="add one">.}
    }else{
        <ul id="partiesList" class="list-unstyled editableList">
          @for(party <- parties){
            <li>
                <input type="hidden" name="id" value="@party.id">
                <div class="partyName">@party.name</div>
                <a class="partyWebPage" href="@party.webPage" target="_blank">@party.webPage</a>
                <button type="button" name="editBtn" onclick="editParty(this);" class="btn btn-sm btn-default"><i class="fa fa-edit"></i></button>
                <button type="button" name="cancelEditBtn" onclick="cancelEdit(this);" class="btn btn-sm btn-secondary hidden"><i class="fa fa-close"></i></button>
                <button type="button" name="saveBtn" onclick="saveParty(this);" class="btn btn-sm btn-primary hidden"><i class="fa fa-save"></i></button>
                <button type="button" name="deleteBtn" onclick="deleteParty(@party.id);" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i></button>
            </li>
          }
        </ul>
    }
    </div>
  </div>
}