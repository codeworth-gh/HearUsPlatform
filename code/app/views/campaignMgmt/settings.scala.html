@import be.objectify.deadbolt.scala.AuthenticatedRequest
@import dataaccess.Platform.Platform
@import models.Position.Position
@(campaign:Campaign, platforms:Seq[Platform], positions:Seq[Position], imageOpt:Option[KMImage], prefix:String)(implicit request: AuthenticatedRequest[_], msgs: MessagesProvider)

@scripts = {
  <script src="@routes.Assets.versioned("js/campaignEditor/settingsPage.js")"></script>
}

@head = {
  <link rel="stylesheet" href="@routes.Assets.versioned("css/labelDisplay.min.css")">
}

@templates.campaignNavbar(campaign.title, views.Structure.campaignEditorItems(campaign), views.CampaignEditorSections.Settings, head, scripts) {
  @comps.pageTitleRow(campaign.title) { }
  <div class="row">
    <div class="col">
      <div id="labels">
        <div class="row">
          <div class="col">
            <input type="hidden" name="id" id="id" value="@campaign.id">
            <h3>@Messages("labels")</h3>
          </div>
          <div class="col text-left">
            <button onclick="updateLabels(@campaign.id)" class="btn btn-sm btn-primary"><i class="fa fa-save"></i> @Messages("campaigns.updateLabels")</button>
          </div>
        </div>

        <div class="row labels">
          <div class="col">
            <div class="noData p-4" id="noLabels" style="display:none">
            @Messages("campaigns.noLabels")
            </div>
            <div class="noData" id="loadingLabels">
              <i class="fa fa-spin fa-refresh"></i> @Messages("loadingLabels")
            </div>
            <div class="labelsCtnr">
              <ul id="labelList" style="list-style-type:none">
                <li id="labelTemplate">
                  <select name="lPosition" id="lPosition" class="form-control" style="display:inline; width:auto">
                  @for(pos <- positions){
                    <option name="l-@pos.toString" value="@pos">@Messages(pos.toString)</option>
                  }
                  </select>
                  <input class="hidden" type="radio" name="lGender" value="Male" id="l-Male">
                  <label for="l-Male" class="buttonLike">@Messages("male")</label>
                  <input class="hidden" type="radio" name="lGender" value="Female" id="l-Female">
                  <label for="l-Female" class="buttonLike">@Messages("female")</label>
                  <label name="label">
                    <input type="text" class="form-control" name="label" placeholder="" maxlength="256"> <span>@Messages("label")</span> </label>
                  <button type="button" class="btn btn-danger" style="vertical-align: baseline" onclick="deleteRow(this)"><i class="fa fa-close"></i></button>
                </li>
              </ul>
              <div>
                <button type="button" class="btn btn-outline-success" onclick="addLabel()"><i class="fa fa-plus"></i> @Messages("add")</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="messages">
        <div>
          <hr>
        </div>
        <div class="row">
          <div class="col">
            <h3>@Messages("messages")</h3>
          </div>
          <div class="col text-left">
            <button onclick="updateMessages(@campaign.id)" class="btn btn-sm btn-primary"><i class="fa fa-save"></i> @Messages("campaigns.updateMessages")</button>
          </div>
        </div>
        <div class="row messages">
          <div class="col">
            <div class="noData p-4" id="noMessages" style="display:none">
            @Messages("campaigns.noMessages")
            </div>
            <div class="noData" id="loadingMessages">
              <i class="fa fa-spin fa-refresh"></i> @Messages("loadingMessages")
            </div>
            <div class="messagesCtnr">
              <ul id="messagesList" style="list-style-type:none">
                <li id="messageTemplate">
                  <select name="mPlatform" id="mPlatform" class="form-control" style="display:inline; width:auto">
                  @for(pl <- platforms){
                    <option name="m-@pl.toString" value="@pl">@Messages(pl.toString)</option>
                  }
                  </select>
                  <select name="mPosition" id="mPosition" class="form-control" style="display:inline; width:auto">
                  @for(pos <- positions){
                    <option name="m-@pos.toString" value="@pos">@Messages(pos.toString)</option>
                  }
                  </select>
                  <input class="hidden" type="radio" name="mGender" value="Male" id="m-Male">
                  <label for="m-Male" class="buttonLike">@Messages("male")</label>
                  <input class="hidden" type="radio" name="mGender" value="Female" id="m-Female">
                  <label for="m-Female" class="buttonLike">@Messages("female")</label>
                  <label name="message">
                    <input type="text" class="form-control" name="message" placeholder="" maxlength="256"> <span>@Messages("message")</span> </label>
                  <button type="button" class="btn btn-danger" style="vertical-align: baseline" onclick="deleteRow(this)"><i class="fa fa-close"></i></button>
                </li>
              </ul>
              <div>
                <button type="button" class="btn btn-outline-success" onclick="addMessage()"><i class="fa fa-plus"></i> @Messages("add")</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="socialMedia">
        <div>
          <hr>
        </div>
        <div class="row">
          <div class="col">
            <h3>@Messages("socialMedia")</h3>
          </div>
          <div class="col text-left">
            <button onclick="updateSm(@campaign.id)" class="btn btn-sm btn-primary"><i class="fa fa-save"></i> @Messages("campaigns.updateSocialMedia")</button>
          </div>
        </div>
        <div class="row sm">
          <div class="col">
            <div class="noData p-4" id="noSm" style="display: none">
            @Messages("campaigns.noSm")
            </div>
            <div class="noData" id="loadingSm">
              <i class="fa fa-spin fa-refresh"></i> @Messages("loadingSm")
            </div>
            <div class="smCtnr">
              <ul id="smList" style="list-style-type:none">
                <li id="smTemplate">
                  <input type="hidden" name="smId" value="-1">
                  <label name="smName">
                    <input type="text" class="form-control" name="smName" placeholder="" maxlength="256"> <span>@Messages("name")</span> </label>
                  <label name="smService">
                    <input type="text" class="form-control" name="smService" placeholder="" maxlength="256"> <span>@Messages("service")</span> </label>
                  <button type="button" class="btn btn-danger" style="vertical-align: baseline" onclick="deleteRow(this)"><i class="fa fa-close"></i></button>
                </li>
              </ul>
              <div>
                <button type="button" class="btn btn-outline-success" onclick="addSm()"><i class="fa fa-plus"></i> @Messages("add")</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="background">
        <div>
          <hr>
        </div>
        <div class="row">
          <div class="col">
            <h3>
            @Messages("background")
            </h3>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <form action="@routes.FilesCtrl.doAddImage(campaign.id, "camps")" method="POST" enctype="multipart/form-data">
              @helper.CSRF.formField
              <div class="form-group row">
                <label class="col-sm-2 control-label" for="imageCredit">@Messages("knessetMemberEditor.imageCredit")</label>
                <div class="col-sm-10">
                  <input type="text" value="@imageOpt.map(_.credit).getOrElse("")" name="imageCredit" class="form-control" id="imageCredit">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-2 control-label" for="imageFile">@Messages("knessetMemberEditor.imageFile")</label>
                <div class="col-sm-10">
                  <input type="file" name="imageFile" id="imageFile" class="form-control">
                </div>
              </div>
              <div class="col text-left">
                <a href="@routes.CampaignAdminCtrl.showCampaigns()" class="btn btn-secondary"><i class="fa fa-close"></i> @Messages("back")</a>
                <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i> @Messages("save")</button>
              </div>
            </form>
          </div>
          <div class="col-md-6">
          @if( imageOpt.isEmpty ){
            <div class="noData">
              <i class="fa fa-5x fa-user-circle-o"></i>
              @Messages("אין תמונה")
            </div>
          }else{
            <div class="text-center">
              <img style="max-height: 300px; max-width:300px" src="@prefix@imageOpt.get.filename" alt=""><br>
              @Messages("imageCredit"): @imageOpt.get.credit
            </div>
          }
          </div>
        </div>
      </div>
    </div>
  </div>

}